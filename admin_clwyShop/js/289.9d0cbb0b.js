"use strict";(self["webpackChunkvue_shop"]=self["webpackChunkvue_shop"]||[]).push([[289],{6289:function(e,t,a){a.r(t),a.d(t,{default:function(){return m}});var r=function(){var e=this,t=e._self._c;return t("div",[t("router-link",{attrs:{to:{name:"productsCreate"}}},[t("el-button",{attrs:{type:"primary",round:""}},[e._v("新增")])],1),t("el-form",{ref:"ruleForm",staticClass:"demo-form-inline",attrs:{inline:!0,model:e.searchParams}},[t("el-form-item",{attrs:{label:"商品名"}},[t("el-input",{attrs:{placeholder:"请输入商品人"},model:{value:e.searchParams.name,callback:function(t){e.$set(e.searchParams,"name",t)},expression:"searchParams.name"}})],1),t("el-form-item",{attrs:{label:"属性分类"}},[t("el-select",{attrs:{placeholder:"请选择"},model:{value:e.searchParams.categoryId,callback:function(t){e.$set(e.searchParams,"categoryId",t)},expression:"searchParams.categoryId"}},e._l(e.categories,(function(a){return t("el-option-group",{key:a.id,attrs:{label:a.name}},e._l(a.children,(function(e){return t("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)})),1)],1),t("el-form-item",{attrs:{label:"上架"}},[t("el-select",{attrs:{placeholder:"活动区域"},model:{value:e.searchParams.sale,callback:function(t){e.$set(e.searchParams,"sale",t)},expression:"searchParams.sale"}},[t("el-option",{attrs:{label:"不限",value:""}}),t("el-option",{attrs:{label:"是",value:"true"}}),t("el-option",{attrs:{label:"否",value:"false"}})],1)],1),t("el-form-item",{attrs:{label:"推荐"}},[t("el-select",{attrs:{placeholder:"活动区域"},model:{value:e.searchParams.recommend,callback:function(t){e.$set(e.searchParams,"recommend",t)},expression:"searchParams.recommend"}},[t("el-option",{attrs:{label:"不限",value:""}}),t("el-option",{attrs:{label:"是",value:"true"}}),t("el-option",{attrs:{label:"否",value:"false"}})],1)],1),t("el-form-item",{attrs:{label:"置顶"}},[t("el-select",{attrs:{placeholder:"活动区域"},model:{value:e.searchParams.top,callback:function(t){e.$set(e.searchParams,"top",t)},expression:"searchParams.top"}},[t("el-option",{attrs:{label:"不限",value:""}}),t("el-option",{attrs:{label:"是",value:"true"}}),t("el-option",{attrs:{label:"否",value:"false"}})],1)],1),t("el-form-item",{attrs:{label:"新品"}},[t("el-select",{attrs:{placeholder:"活动区域"},model:{value:e.searchParams.new,callback:function(t){e.$set(e.searchParams,"new",t)},expression:"searchParams.new"}},[t("el-option",{attrs:{label:"不限",value:""}}),t("el-option",{attrs:{label:"是",value:"true"}}),t("el-option",{attrs:{label:"否",value:"false"}})],1)],1),t("el-form-item",{attrs:{label:"热门"}},[t("el-select",{attrs:{placeholder:"活动区域"},model:{value:e.searchParams.hot,callback:function(t){e.$set(e.searchParams,"hot",t)},expression:"searchParams.hot"}},[t("el-option",{attrs:{label:"不限",value:""}}),t("el-option",{attrs:{label:"是",value:"true"}}),t("el-option",{attrs:{label:"否",value:"false"}})],1)],1),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:e.init}},[e._v("查询")]),t("el-button",{on:{click:function(t){return e.resetForm("ruleForm")}}},[e._v("重置")])],1)],1),t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.products}},[t("el-table-column",{attrs:{label:"编号"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(a.row.id))])]}}])}),t("el-table-column",{attrs:{label:"缩略图"},scopedSlots:e._u([{key:"default",fn:function(e){return[t("el-image",{attrs:{src:e.row.image,id:"pic"}})]}}])}),t("el-table-column",{attrs:{label:"商品名"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(a.row.name))])]}}])}),t("el-table-column",{attrs:{label:"单价"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(a.row.price))])]}}])}),t("el-table-column",{staticClass:"switch",attrs:{label:"上架"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},on:{change:function(t){return e.toggleShop(a.row,"sale")}},model:{value:a.row.sale,callback:function(t){e.$set(a.row,"sale",t)},expression:"scope.row.sale"}})]}}])}),t("el-table-column",{staticClass:"switch",attrs:{label:"推荐"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},on:{change:function(t){return e.toggleShop(a.row,"recommend")}},model:{value:a.row.recommend,callback:function(t){e.$set(a.row,"recommend",t)},expression:"scope.row.recommend"}})]}}])}),t("el-table-column",{staticClass:"switch",attrs:{label:"置顶"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},on:{change:function(t){return e.toggleShop(a.row,"top")}},model:{value:a.row.top,callback:function(t){e.$set(a.row,"top",t)},expression:"scope.row.top"}})]}}])}),t("el-table-column",{staticClass:"switch",attrs:{label:"新品"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},on:{change:function(t){return e.toggleShop(a.row,"new")}},model:{value:a.row.new,callback:function(t){e.$set(a.row,"new",t)},expression:"scope.row.new"}})]}}])}),t("el-table-column",{staticClass:"switch",attrs:{label:"热门"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},on:{change:function(t){return e.toggleShop(a.row,"hot")}},model:{value:a.row.hot,callback:function(t){e.$set(a.row,"hot",t)},expression:"scope.row.hot"}})]}}])}),t("el-table-column",{attrs:{label:"创建时间"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("span",{staticStyle:{"margin-left":"10px"}},[e._v(" "+e._s(e._f("dateFormat")(a.row.createdAt)))])]}}])}),t("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("router-link",{attrs:{to:{name:"productsEdit",params:{id:a.row.id}}}},[t("el-button",{attrs:{size:"mini"}},[e._v(" 编辑 ")])],1),t("el-popconfirm",{attrs:{title:"确认删除？"},on:{confirm:function(t){return e.handleDelete(a.row)}}},[t("el-button",{attrs:{slot:"reference",size:"mini",type:"danger"},slot:"reference"},[e._v("删除")])],1)]}}])})],1),t("div",{staticClass:"block"},[t("span",{staticClass:"demonstration"},[e._v("完整功能")]),t("el-pagination",{attrs:{"current-page":e.pagination.currentPage,"page-sizes":[8,16,24,32],"page-size":e.pagination.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.pagination.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)},l=[],o=a(1591),n=a(9998),s={data(){return{products:[],searchParams:{name:"",categoryId:"",currentPage:1,pageSize:10},pagination:{},categories:[]}},created(){this.init()},methods:{async init(){const e=await(0,o._q)(this.searchParams);this.products=e.data.products,this.pagination=e.data.pagination;const t=await(0,n.zH)();this.categories=t.data.categories},async handleDelete(e){const t=await(0,o.F2)(e.id);2e4===t.code?(this.$message.success(t.message),this.init()):this.$message.error(t.message)},resetForm(e){this.$refs[e].resetFields()},async toggleShop(e,t){const a=await(0,o.Zx)(e.id,{type:t});console.log(a),2e4===a.code?this.$message.success(a.message):this.$message.error(a.message)},handleSizeChange(e){this.searchParams.pageSize=e,this.init()},handleCurrentChange(e){this.searchParams.currentPage=e,this.init()}}},c=s,i=a(1001),u=(0,i.Z)(c,r,l,!1,null,null,null),m=u.exports},1591:function(e,t,a){a.d(t,{F2:function(){return c},Js:function(){return s},LT:function(){return n},Zx:function(){return i},_q:function(){return l},t2:function(){return o}});var r=a(4471);function l(e){return(0,r.Z)({url:"/admin/products",method:"get",params:e})}function o(e){return(0,r.Z)({url:`http://localhost:3000/admin/products/${e}`,method:"get"})}function n(e){return(0,r.Z)({url:"http://localhost:3000/admin/products",method:"post",data:e})}function s(e,t){return(0,r.Z)({url:`http://localhost:3000/admin/products/${e}`,method:"put",data:t})}function c(e){return(0,r.Z)({url:`http://localhost:3000/admin/products/${e}`,method:"delete"})}function i(e,t){return(0,r.Z)({url:`http://localhost:3000/admin/products/${e}/change_attr`,method:"patch",data:t})}},9998:function(e,t,a){a.d(t,{Bp:function(){return n},DA:function(){return c},cs:function(){return i},qT:function(){return o},tU:function(){return s},zH:function(){return l}});var r=a(4471);function l(e){return(0,r.Z)({url:"/admin/categories",method:"get",params:e})}function o(e){return(0,r.Z)({url:`/admin/categories/${e}`,method:"get"})}function n(e){return(0,r.Z)({url:"/admin/categories",method:"post",data:e})}function s(e,t){return(0,r.Z)({url:`/admin/categories/${e}`,method:"put",data:t})}function c(e){return(0,r.Z)({url:`/admin/categories/${e}`,method:"delete"})}function i(e,t){return(0,r.Z)({url:`/admin/categories/${e}/change_sort`,method:"patch",data:t})}}}]);
//# sourceMappingURL=289.9d0cbb0b.js.map