{"version":3,"file":"js/801.c6cc8925.js","mappings":"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","sources":["webpack://vue_shop/./src/views/Ads/AdsView.vue","webpack://vue_shop/src/views/Ads/AdsView.vue","webpack://vue_shop/./src/views/Ads/AdsView.vue?2502","webpack://vue_shop/./src/views/Ads/AdsView.vue?4570","webpack://vue_shop/./src/api/ads.js"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[_c('router-link',{attrs:{\"to\":{ name: 'adsCreate' }}},[_c('el-button',{attrs:{\"type\":\"primary\",\"round\":\"\"}},[_vm._v(\"新增广告\")])],1),_c('el-form',{staticClass:\"demo-form-inline\",attrs:{\"inline\":true,\"model\":_vm.searchParams}},[_c('el-form-item',{attrs:{\"label\":\"标题\"}},[_c('el-input',{attrs:{\"placeholder\":\"请输入标题\"},model:{value:(_vm.searchParams.title),callback:function ($$v) {_vm.$set(_vm.searchParams, \"title\", $$v)},expression:\"searchParams.title\"}})],1),_c('el-form-item',{attrs:{\"label\":\"所属分类\"}},[_c('el-select',{attrs:{\"placeholder\":\"活动区域\"},model:{value:(_vm.searchParams.categoryId),callback:function ($$v) {_vm.$set(_vm.searchParams, \"categoryId\", $$v)},expression:\"searchParams.categoryId\"}},_vm._l((_vm.categories),function(category){return _c('el-option',{key:category.id,attrs:{\"label\":category.name,\"value\":category.id}})}),1)],1),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.init}},[_vm._v(\"查询\")])],1),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"success\"}},[_vm._v(\"取消\")])],1)],1),_c('el-table',{staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.ads,\"stripe\":\"\"}},[_c('el-table-column',{attrs:{\"label\":\"编号\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_vm._v(\" \"+_vm._s(scope.row.id))]}}])}),_c('el-table-column',{attrs:{\"label\":\"缩略图\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('img',{attrs:{\"src\":scope.row.image,\"alt\":\"\"}})]}}])}),_c('el-table-column',{attrs:{\"label\":\"标题\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_vm._v(_vm._s(scope.row.title))]}}])}),_c('el-table-column',{attrs:{\"label\":\"链接地址\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-link',{attrs:{\"to\":\"\",\"href\":scope.row.url}},[_vm._v(_vm._s(scope.row.url))])]}}])}),_c('el-table-column',{attrs:{\"label\":\"所属分类\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_vm._v(_vm._s(scope.row.category.name))]}}])}),_c('el-table-column',{attrs:{\"label\":\"排序\",\"width\":\"80\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-input',{on:{\"change\":function($event){return _vm.handleChange(scope.row.id, scope.row.sort)}},model:{value:(scope.row.sort),callback:function ($$v) {_vm.$set(scope.row, \"sort\", _vm._n($$v))},expression:\"scope.row.sort\"}})]}}])}),_c('el-table-column',{attrs:{\"label\":\"创建时间\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_vm._v(\" \"+_vm._s(_vm._f(\"dateFormat\")(scope.row.createdAt)))]}}])}),_c('el-table-column',{attrs:{\"label\":\"操作\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('router-link',{attrs:{\"to\":{ name: 'adsEdit', params: { id: scope.row.id } }}},[_c('el-button',{attrs:{\"size\":\"mini\"},on:{\"click\":function($event){return _vm.handleEdit(scope.row)}}},[_vm._v(\" 编辑 \")])],1),_c('el-popconfirm',{attrs:{\"title\":\"确认删除？\"},on:{\"confirm\":function($event){return _vm.handleDelete(scope.row)}}},[_c('el-button',{attrs:{\"slot\":\"reference\",\"size\":\"mini\",\"type\":\"danger\"},slot:\"reference\"},[_vm._v(\"删除\")])],1)]}}])})],1),_c('div',{staticClass:\"block\"},[_c('el-pagination',{attrs:{\"current-page\":_vm.pagination.currentPage,\"page-sizes\":[10, 20, 30, 40],\"page-size\":_vm.pagination.pageSize,\"layout\":\"total, sizes, prev, pager, next, jumper\",\"total\":_vm.pagination.total},on:{\"size-change\":_vm.handleSizeChange,\"current-change\":_vm.handleCurrentChange}})],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <router-link :to=\"{ name: 'adsCreate' }\">\n      <el-button type=\"primary\" round>新增广告</el-button>\n    </router-link>\n    <el-form :inline=\"true\" :model=\"searchParams\" class=\"demo-form-inline\">\n      <el-form-item label=\"标题\">\n        <el-input\n          v-model=\"searchParams.title\"\n          placeholder=\"请输入标题\"\n        ></el-input>\n      </el-form-item>\n      <el-form-item label=\"所属分类\">\n        <el-select v-model=\"searchParams.categoryId\" placeholder=\"活动区域\">\n          <el-option\n            v-for=\"category in categories\"\n            :label=\"category.name\"\n            :value=\"category.id\"\n            :key=\"category.id\"\n          ></el-option>\n        </el-select>\n      </el-form-item>\n      <el-form-item>\n        <el-button type=\"primary\" @click=\"init\">查询</el-button>\n      </el-form-item>\n      <el-form-item>\n        <el-button type=\"success\">取消</el-button>\n      </el-form-item>\n    </el-form>\n    <el-table :data=\"ads\" stripe style=\"width: 100%\">\n      <el-table-column label=\"编号\">\n        <template slot-scope=\"scope\"> {{ scope.row.id }}</template>\n      </el-table-column>\n      <el-table-column label=\"缩略图\">\n        <template slot-scope=\"scope\">\n          <img :src=\"scope.row.image\" alt=\"\" />\n        </template>\n      </el-table-column>\n      <el-table-column label=\"标题\">\n        <template slot-scope=\"scope\">{{ scope.row.title }}</template>\n      </el-table-column>\n      <el-table-column label=\"链接地址\">\n        <template slot-scope=\"scope\"\n          ><el-link to=\"\" :href=\"scope.row.url\">{{\n            scope.row.url\n          }}</el-link></template\n        >\n      </el-table-column>\n      <el-table-column label=\"所属分类\">\n        <template slot-scope=\"scope\">{{ scope.row.category.name }}</template>\n      </el-table-column>\n      <el-table-column label=\"排序\" width=\"80\">\n        <template slot-scope=\"scope\">\n          <el-input\n            v-model.number=\"scope.row.sort\"\n            @change=\"handleChange(scope.row.id, scope.row.sort)\"\n          ></el-input>\n        </template>\n      </el-table-column>\n      <el-table-column label=\"创建时间\">\n        <template slot-scope=\"scope\">\n          {{ scope.row.createdAt | dateFormat }}</template\n        >\n      </el-table-column>\n      <el-table-column label=\"操作\">\n        <template slot-scope=\"scope\">\n          <router-link :to=\"{ name: 'adsEdit', params: { id: scope.row.id } }\">\n            <el-button size=\"mini\" @click=\"handleEdit(scope.row)\">\n              编辑\n            </el-button>\n          </router-link>\n          <el-popconfirm title=\"确认删除？\" @confirm=\"handleDelete(scope.row)\">\n            <el-button size=\"mini\" type=\"danger\" slot=\"reference\"\n              >删除</el-button\n            >\n          </el-popconfirm>\n        </template>\n      </el-table-column>\n    </el-table>\n    <div class=\"block\">\n      <el-pagination\n        @size-change=\"handleSizeChange\"\n        @current-change=\"handleCurrentChange\"\n        :current-page=\"pagination.currentPage\"\n        :page-sizes=\"[10, 20, 30, 40]\"\n        :page-size=\"pagination.pageSize\"\n        layout=\"total, sizes, prev, pager, next, jumper\"\n        :total=\"pagination.total\"\n      >\n      </el-pagination>\n    </div>\n  </div>\n</template>\n<script>\nimport { fetchAdsList, deleteAds, sortAds, categoriesList } from \"@/api/ads\";\n\nexport default {\n  data() {\n    return {\n      ads: [],\n      categories: [],\n      pagination: {\n        currentPage: 1,\n        pageSize: 10,\n        total: 10,\n      },\n      searchParams: {\n        title: \"\",\n        categoryId: \"\",\n        currentPage: 1,\n        pageSize: 10,\n      },\n    };\n  },\n  created() {\n    this.init();\n  },\n  methods: {\n    async init() {\n      const res = await fetchAdsList(this.searchParams);\n      this.ads = res.data.ads;\n      this.pagination = res.data.pagination;\n      const test = await categoriesList();\n      this.categories = test.data.categories;\n    },\n    handleEdit(row) {\n      console.log(row);\n    },\n    async onSubmit() {\n      //拼接字符\n      // const res = await request.get(\n      //   `/admin/ads?title=${this.searchParams.title}&categoryId=${this.searchParams.categoryId}`\n      // );\n      //调用data定义的方法（简化写法）\n      // const res = await request.get(`/admin/ads`, {\n      //   params: {\n      //     title: this.searchParams.title,\n      //     categoryId: this.searchParams.categoryId,\n      //   },\n      // });\n      //最终简化版\n      // const res = await request.get(`/admin/ads`, {\n      //   params: this.searchParams,\n      // });\n      // this.ads = res.data.ads;\n    },\n    async handleDelete(row) {\n      const res = await deleteAds(row.id);\n      if (res.code !== 20000) {\n        this.$message.error(res.message);\n        return;\n      }\n      this.$message.success(res.message);\n      this.init();\n    },\n    async handleChange(id, sort) {\n      const res = await sortAds(id, { sort });\n      if (res.code !== 20000) {\n        this.$message.error(res.message);\n        return;\n      }\n      this.$message.success(res.message);\n      this.init();\n    },\n    handleSizeChange(val) {\n      this.searchParams.pageSize = val;\n      this.init();\n    },\n    handleCurrentChange(val) {\n      this.searchParams.currentPage = val;\n      this.init();\n    },\n  },\n};\n</script>\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./AdsView.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./AdsView.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./AdsView.vue?vue&type=template&id=6e244731&\"\nimport script from \"./AdsView.vue?vue&type=script&lang=js&\"\nexport * from \"./AdsView.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import request from \"@/utils/request\";\n\n// 查询列表\nexport function fetchAdsList(params) {\n  return request({\n    url: \"/admin/ads\",\n    method: \"get\",\n    params,\n  });\n}\n\n// 查询单条\nexport function fetchAds(id) {\n  return request({\n    url: `/admin/ads/${id}`,\n    method: \"get\",\n  });\n}\n\n// 创建\nexport function createAds(data) {\n  return request({\n    url: \"/admin/ads\",\n    method: \"post\",\n    data,\n  });\n}\n\n// 修改\nexport function updateAds(id, data) {\n  return request({\n    url: `/admin/ads/${id}`,\n    method: \"put\",\n    data,\n  });\n}\n\n// 删除\nexport function deleteAds(id) {\n  return request({\n    url: `/admin/ads/${id}`,\n    method: \"delete\",\n  });\n}\n\n// 排序\nexport function sortAds(id, data) {\n  return request({\n    url: `/admin/ads/${id}/change_sort`,\n    method: \"patch\",\n    data,\n  });\n}\n\n// 查询广告分类列表\nexport function categoriesList(params) {\n  return request({\n    url: \"/admin/ad_categories\",\n    method: \"get\",\n    params,\n  });\n}\n"],"names":["render","_vm","this","_c","_self","attrs","name","_v","staticClass","searchParams","model","value","title","callback","$$v","$set","expression","categoryId","_l","categories","category","key","id","on","init","staticStyle","ads","scopedSlots","_u","fn","scope","_s","row","image","url","$event","handleChange","sort","_n","_f","createdAt","params","handleEdit","handleDelete","slot","pagination","currentPage","pageSize","total","handleSizeChange","handleCurrentChange","staticRenderFns","data","created","methods","console","component","fetchAdsList","request","method","fetchAds","createAds","updateAds","deleteAds","sortAds","categoriesList"],"sourceRoot":""}