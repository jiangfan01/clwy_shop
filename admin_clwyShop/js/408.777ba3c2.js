"use strict";(self["webpackChunkvue_shop"]=self["webpackChunkvue_shop"]||[]).push([[408],{9408:function(t,e,i){i.r(e),i.d(e,{default:function(){return b}});var r=function(){var t=this,e=t._self._c;return e("div",[e("el-button",{attrs:{type:"primary",round:""},on:{click:t.handleCreate}},[t._v("新增新闻")]),e("el-popconfirm",{attrs:{title:"确认全部删除吗？"},on:{confirm:t.multipleDelete}},[e("el-button",{attrs:{slot:"reference",type:"danger",round:""},slot:"reference"},[t._v("批量删除")])],1),e("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:t.searchParams}},[e("el-form-item",{attrs:{label:"标题"}},[e("el-input",{attrs:{placeholder:"标题"},model:{value:t.searchParams.title,callback:function(e){t.$set(t.searchParams,"title",e)},expression:"searchParams.title"}})],1),e("el-form-item",[e("el-button",{attrs:{type:"primary",round:""},on:{click:t.init}},[t._v("查询")])],1)],1),e("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.articles,"tooltip-effect":"dark"},on:{"selection-change":t.handleSelectionChange}},[e("el-table-column",{attrs:{type:"selection",width:"55"}}),e("el-table-column",{attrs:{label:"编号",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.id)+" ")]}}])}),e("el-table-column",{attrs:{label:"新闻内容",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.title)+" ")]}}])}),e("el-table-column",{attrs:{label:"创建时间",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("dateFormat")(e.row.createdAt))+" ")]}}])}),e("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("el-button",{attrs:{size:"mini"},on:{click:function(e){return t.handleEdit(i.row.id)}}},[t._v(" 编辑 ")]),e("el-popconfirm",{attrs:{title:"确认删除到回收站吗？"},on:{confirm:function(e){return t.handleDelete(i.row)}}},[e("el-button",{attrs:{slot:"reference",size:"mini",type:"danger"},slot:"reference"},[t._v("删除")])],1)]}}])})],1),e("ArticlesDialogs",{ref:"form",attrs:{isEdit:t.isEdit}}),e("div",{staticClass:"block"},[e("el-pagination",{attrs:{"current-page":t.pagination.currentPage,"page-sizes":[10,20,30,40],"page-size":t.pagination.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.pagination.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1)},a=[],n=i(7580),l=function(){var t=this,e=t._self._c;return e("el-dialog",{attrs:{title:"收货地址",visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[e("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:t.article,"label-width":"100px"}},[e("el-form-item",{attrs:{label:"新闻标题",prop:"title"}},[e("el-input",{model:{value:t.article.title,callback:function(e){t.$set(t.article,"title",e)},expression:"article.title"}})],1),e("el-form-item",{attrs:{label:"内容",prop:"title"}},[e("quill-editor",{ref:"myQuillEditor",attrs:{options:t.editorOption},model:{value:t.article.body,callback:function(e){t.$set(t.article,"body",e)},expression:"article.body"}})],1)],1),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),e("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.submitForm("ruleForm")}}},[t._v("确 定")])],1)],1)},s=[],o=i(7715),c={props:["isEdit"],components:{quillEditor:o.quillEditor},data(){return{dialogFormVisible:!1,editId:"",article:{title:"",body:""},editorOption:{placeholder:"请填写文章内容"},formLabelWidth:"120px"}},methods:{async initForm(t){const e=await(0,n.V8)(t);this.editId=t,this.article=e.data.article},submitForm(t){this.$refs[t].validate((async t=>{if(t){let t;t=this.isEdit?await(0,n.Xc)(this.editId,this.article):await(0,n.tu)(this.article),this.dialogFormVisible=!1,this.$message.success(t.message),this.$parent.init()}}))},resetForm(){this.article={title:"",body:""}}}},u=c,d=i(1001),m=(0,d.Z)(u,l,s,!1,null,null,null),h=m.exports,f={components:{ArticlesDialogs:h},data(){return{articles:[],multipleSelection:[],pagination:{currentPage:1,pageSize:10,total:10},searchParams:{title:"",currentPage:1,pageSize:10},isEdit:!1}},created(){this.init()},methods:{async init(){const t=await(0,n.iF)(this.searchParams);this.articles=t.data.articles,this.pagination=t.data.pagination},async handleDelete(t){const e=await(0,n.jX)(t.id);2e4===e.code?(this.$message.success(e.message),this.init()):this.$message.error(e.message)},handleSelectionChange(t){this.multipleSelection=t.map((t=>t.id))},async multipleDelete(){const t=await(0,n.nf)(this.multipleSelection);2e4===t.code?(this.$message.success(t.message),this.init()):this.$message.error(t.message)},onSubmit(){},handleSizeChange(t){this.searchParams.pageSize=t,this.init()},handleCurrentChange(t){this.searchParams.currentPage=t,this.init()},handleCreate(){this.$refs.form.dialogFormVisible=!0,this.$refs.form.resetForm(),this.isEdit=!1},handleEdit(t){this.$refs.form.dialogFormVisible=!0,this.isEdit=!0,this.$refs.form.initForm(t)}}},p=f,g=(0,d.Z)(p,r,a,!1,null,null,null),b=g.exports},7580:function(t,e,i){i.d(e,{MG:function(){return m},Mt:function(){return d},V8:function(){return n},Xc:function(){return s},eN:function(){return h},iF:function(){return a},jX:function(){return o},nf:function(){return c},o:function(){return u},tu:function(){return l}});var r=i(4471);function a(t){return(0,r.Z)({url:"/admin/articles",method:"get",params:t})}function n(t){return(0,r.Z)({url:`/admin/articles/${t}`,method:"get"})}function l(t){return(0,r.Z)({url:"/admin/articles",method:"post",data:t})}function s(t,e){return(0,r.Z)({url:`/admin/articles/${t}`,method:"put",data:e})}function o(t){return(0,r.Z)({url:`/admin/articles/${t}`,method:"delete"})}function c(t){return(0,r.Z)({url:"/admin/articles/multiple_delete",method:"post",data:t})}function u(t){return(0,r.Z)({url:"/admin/articles/trash",method:"get",params:t})}function d(t){return(0,r.Z)({url:`/admin/articles/${t}/restore`,method:"patch"})}function m(t){return(0,r.Z)({url:`/admin/articles/${t}/force`,method:"delete"})}function h(t){return(0,r.Z)({url:"/admin/articles/multiple_delete/force",method:"post",data:t})}}}]);
//# sourceMappingURL=408.777ba3c2.js.map