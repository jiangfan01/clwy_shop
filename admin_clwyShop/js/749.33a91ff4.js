"use strict";(self["webpackChunkvue_shop"]=self["webpackChunkvue_shop"]||[]).push([[749],{7749:function(t,s,e){e.r(s),e.d(s,{default:function(){return u}});var r=function(){var t=this,s=t._self._c;return s("div",{staticClass:"uc-box uc-main-box"},[s("div",{staticClass:"uc-content-box order-view-box"},[s("div",{staticClass:"box-hd"},[s("div",{staticClass:"more clearfix"},[s("h2",{staticClass:"subtitle"},[t._v(" 订单号： "),s("span",{staticClass:"tag tag-subsidy"},[t._v(t._s(t.order.id))])])])]),s("div",{staticClass:"box-bd"},[s("div",{staticClass:"uc-order-item uc-order-item-finish"},[s("div",{staticClass:"order-detail"},[s("div",{staticClass:"order-status"},[t._v(" "+t._s(t._f("ordersMode")(t.order.status))+" "),s("div",{staticStyle:{float:"right","margin-right":"10px"}},[2===t.order.status?s("el-popconfirm",{staticClass:"delete",attrs:{title:"确定配货吗？"},on:{confirm:t.handlePicking}},[s("el-button",{attrs:{slot:"reference",type:"primary"},slot:"reference"},[t._v(" 配货")])],1):t._e(),3===t.order.status||4===t.order.status?s("form",{staticClass:"am-form-inline",staticStyle:{display:"inline-block"}},[s("div",{staticClass:"am-form-group"},[s("el-select",{model:{value:t.order.expressId,callback:function(s){t.$set(t.order,"expressId",s)},expression:"order.expressId"}},t._l(t.expresses,(function(t){return s("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1),s("div",{staticClass:"am-form-group"},[s("el-input",{attrs:{placeholder:"请输入快递单号"},model:{value:t.order.expressNum,callback:function(s){t.$set(t.order,"expressNum",s)},expression:"order.expressNum"}})],1),s("el-button",{staticClass:"order-change",attrs:{type:"danger"},on:{click:t.handleShipping}},[t._v(" "+t._s(3===t.order.status?"发货":"修改递单号")+" ")]),4===t.order.status?s("el-button",{staticClass:"order-success",attrs:{type:"success"},on:{click:t.handleFinish}},[t._v(" 交易成功 ")]):t._e()],1):t._e()],1)])]),s("div",{staticClass:"order-summary"},[s("div",{staticClass:"order-progress"},[s("el-steps",{attrs:{active:t.order.status,"align-center":""}},[s("el-step",{attrs:{title:"下单",icon:"el-icon-edit",description:t._f("dateFormat")(t.order.createdAt)}}),s("el-step",{attrs:{title:"付款",icon:"el-icon-wallet",description:t._f("dateFormat")(t.order.paidAt)}}),s("el-step",{attrs:{title:"配货",icon:" el-icon-truck",description:t._f("dateFormat")(t.order.pickedAt)}}),s("el-step",{attrs:{title:"出库",icon:"el-icon-box",description:t._f("dateFormat")(t.order.shippedAt)}}),s("el-step",{attrs:{title:"交易成功",icon:"el-icon-check",description:t._f("dateFormat")(t.order.finishedAt)}})],1)],1),t.order.status>3?s("el-collapse",{staticClass:"order-finish"},[s("el-collapse-item",{attrs:{title:"展开物流详情",name:"1"}},[s("iframe",{attrs:{name:"kuaidi100",src:`https://www.kuaidi100.com/chaxun?com=${t.order.express.code}&nu=${t.order.expressNum}`,width:"100%",height:"880",marginwidth:"0",marginheight:"0",hspace:"0",vspace:"0",frameborder:"0",scrolling:"no"}})])],1):t._e(),s("table",{staticClass:"order-items-table"},[s("tbody",t._l(t.order.products,(function(e){return s("tr",{key:e.id},[s("td",{staticClass:"col col-thumb"},[s("div",{staticClass:"figure figure-thumb"},[s("a",{attrs:{target:"_blank",href:"http://admin.canon4ever.com/shop/product/35/edit"}},[s("img",{attrs:{src:e.image,width:"80",height:"80"}})])])]),s("td",{staticClass:"col col-name"},[s("p",{staticClass:"name"},[s("a",{attrs:{target:"_blank",href:"//item.mi.com/1151400001.html"}},[t._v(t._s(e.name))])])]),s("td",{staticClass:"col col-price"},[s("p",{staticClass:"price"},[t._v(" "+t._s(e.price)+"元 × "+t._s(e.num)+" ")])]),s("td",{staticClass:"col col-actions"})])})),0)]),s("div",{staticClass:"order-detail-info",attrs:{id:"editAddr"}},[s("h3",{staticStyle:{"text-align":"left"}},[t._v("收货信息")]),s("table",{staticClass:"info-table"},[s("tbody",[s("tr",[s("th",[t._v("姓       名：")]),s("td",[t._v(t._s(t.order.address.name))])]),s("tr",[s("th",[t._v("联系电话：")]),s("td",[s("a",{attrs:{href:"tel:"+t.order.address.tel}},[t._v(t._s(t.order.address.tel))])])]),s("tr",[s("th",[t._v("收货地址：")]),s("td",[t._v(" "+t._s(t.order.address.province)+t._s(t.order.address.city)+" "+t._s(t.order.address.area)+" "+t._s(t.order.address.detail)+" ")])])])]),s("div",{staticClass:"actions"})]),t._m(0),s("div",{staticClass:"order-detail-total"},[s("table",{staticClass:"total-table"},[s("tbody",[s("tr",[s("th",[t._v("商品总价：")]),s("td",[s("span",{staticClass:"num"},[t._v(t._s(t.order.totalPrice))]),t._v("元 ")])]),s("tr",[s("th",[t._v("商品总数量：")]),s("td",[s("span",{staticClass:"num"},[t._v(t._s(t.order.totalNum))]),t._v("件 ")])]),s("tr",[s("th",{staticClass:"total"},[t._v("实付金额：")]),s("td",{staticClass:"total"},[s("span",{staticClass:"num"},[t._v(t._s(1===t.order.status?0:t.order.totalPrice))]),t._v("元 ")])])])])])],1)])])])])},a=[function(){var t=this,s=t._self._c;return s("div",{staticClass:"order-detail-info",attrs:{id:"editTime"}},[s("h3",{staticStyle:{"text-align":"left"}},[t._v("支付方式及送货时间")]),s("table",{staticClass:"info-table"},[s("tbody",[s("tr",[s("th",[t._v("支付方式：")]),s("td",[t._v("在线支付")])]),s("tr",[s("th",[t._v("送货时间：")]),s("td",[t._v("不限送货时间")])])])]),s("div",{staticClass:"actions"})])}],i=e(6502),n=e(4726),d={data(){return{order:{address:{}},expresses:{}}},created(){this.init(),this.initExpresses()},methods:{async init(){const t=await(0,i.AU)(this.$route.params.id);this.order=t.data.order},async initExpresses(){const t=await(0,n.Kd)();this.expresses=t.data.expresses},async handlePicking(){const t=await(0,i.QQ)(this.$route.params.id);this.$message({message:t.message,type:"success"}),this.init()},async handleShipping(){const t=await(0,i.qm)(this.$route.params.id,{expressId:this.order.expressId,expressNum:this.order.expressNum});this.$message({message:t.message,type:"success"}),this.init()},async handleFinish(){const t=await(0,i.U0)(this.$route.params.id);this.$message({message:t.message,type:"success"}),this.init()}},filters:{ordersMode(t){const s=["待付款","待发货","配货中","待收货","已完成"];return s[t-1]}}},o=d,c=e(1001),l=(0,c.Z)(o,r,a,!1,null,"1adb0d9c",null),u=l.exports},4726:function(t,s,e){e.d(s,{Hu:function(){return d},Hx:function(){return n},Jr:function(){return o},Kd:function(){return a},R_:function(){return c},uC:function(){return i}});var r=e(4471);function a(t){return(0,r.Z)({url:"/admin/expresses",method:"get",params:t})}function i(t){return(0,r.Z)({url:`/admin/expresses/${t}`,method:"get"})}function n(t){return(0,r.Z)({url:"/admin/expresses",method:"post",data:t})}function d(t,s){return(0,r.Z)({url:`/admin/expresses/${t}`,method:"put",data:s})}function o(t){return(0,r.Z)({url:`/admin/expresses/${t}`,method:"delete"})}function c(t,s){return(0,r.Z)({url:`/admin/expresses/${t}/change_sort`,method:"patch",data:s})}},6502:function(t,s,e){e.d(s,{AU:function(){return i},QQ:function(){return n},U0:function(){return o},ig:function(){return a},qm:function(){return d}});var r=e(4471);function a(t){return(0,r.Z)({url:"/admin/orders",method:"get",params:t})}function i(t){return(0,r.Z)({url:`/admin/orders/${t}`,method:"get"})}function n(t){return(0,r.Z)({url:`/admin/orders/${t}/picking`,method:"patch"})}function d(t,s){return(0,r.Z)({url:`/admin/orders/${t}/shipping`,method:"patch",data:s})}function o(t){return(0,r.Z)({url:`/admin/orders/${t}/finishing`,method:"patch"})}}}]);
//# sourceMappingURL=749.33a91ff4.js.map