"use strict";(self["webpackChunkvue_shop"]=self["webpackChunkvue_shop"]||[]).push([[388],{3388:function(t,e,n){n.r(e),n.d(e,{default:function(){return c}});var r=function(){var t=this,e=t._self._c;return e("div",[e("router-link",{attrs:{to:{name:"shopCreate"}}},[e("el-button",{attrs:{type:"primary",round:""}},[t._v("新增")])],1),e("el-table",{staticStyle:{width:"100%","margin-bottom":"20px"},attrs:{data:t.categories,"row-key":"id","default-expand-all":""}},[e("el-table-column",{attrs:{label:"名称",width:"180"},scopedSlots:t._u([{key:"default",fn:function(n){return[e("span",{staticStyle:{"margin-left":"10px"}},[t._v(t._s(n.row.name))])]}}])}),e("el-table-column",{attrs:{label:"图片",width:"180"},scopedSlots:t._u([{key:"default",fn:function(n){return[0!==n.row.parentId?e("img",{attrs:{src:n.row.image,alt:""}}):t._e()]}}])}),e("el-table-column",{attrs:{label:"排序",width:"180"},scopedSlots:t._u([{key:"default",fn:function(n){return[e("el-input",{on:{change:function(e){return t.handleChange(n.row.id,n.row.sort)}},model:{value:n.row.sort,callback:function(e){t.$set(n.row,"sort",t._n(e))},expression:"scope.row.sort"}})]}}])}),e("el-table-column",{attrs:{label:"创建时间",width:"180"},scopedSlots:t._u([{key:"default",fn:function(n){return[e("span",{staticStyle:{"margin-left":"10px"}},[t._v(" "+t._s(t._f("dateFormat")(n.row.createdAt)))])]}}])}),e("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(n){return[e("router-link",{attrs:{to:{name:"shopEdit",params:{id:n.row.id}}}},[e("el-button",{attrs:{size:"mini"}},[t._v("编辑")])],1),e("el-popconfirm",{attrs:{title:"确认删除？"},on:{confirm:function(e){return t.handleDelete(n.row)}}},[e("el-button",{attrs:{slot:"reference",size:"mini",type:"danger"},slot:"reference"},[t._v("删除")])],1)]}}])})],1)],1)},a=[],s=n(9998),o={data(){return{categories:[]}},created(){this.init()},methods:{async init(){const t=await(0,s.zH)();this.categories=t.data.categories},async handleChange(t,e){const n=await(0,s.cs)(t,{sort:e});2e4===n.code?(this.$message.success(n.message),this.init()):this.$message.error(n.message)},async handleDelete(t){const e=await(0,s.DA)(t.id);2e4===e.code?(this.$message.success(e.message),this.init()):this.$message.error(e.message)}}},i=o,u=n(1001),l=(0,u.Z)(i,r,a,!1,null,"20cdfd8f",null),c=l.exports},9998:function(t,e,n){n.d(e,{Bp:function(){return o},DA:function(){return u},cs:function(){return l},qT:function(){return s},tU:function(){return i},zH:function(){return a}});var r=n(4471);function a(t){return(0,r.Z)({url:"/admin/categories",method:"get",params:t})}function s(t){return(0,r.Z)({url:`/admin/categories/${t}`,method:"get"})}function o(t){return(0,r.Z)({url:"/admin/categories",method:"post",data:t})}function i(t,e){return(0,r.Z)({url:`/admin/categories/${t}`,method:"put",data:e})}function u(t){return(0,r.Z)({url:`/admin/categories/${t}`,method:"delete"})}function l(t,e){return(0,r.Z)({url:`/admin/categories/${t}/change_sort`,method:"patch",data:e})}}}]);
//# sourceMappingURL=388.0e6b865f.js.map