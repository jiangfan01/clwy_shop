{"version":3,"file":"js/388.0e6b865f.js","mappings":"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","sources":["webpack://vue_shop/./src/views/shop/ListView.vue","webpack://vue_shop/src/views/shop/ListView.vue","webpack://vue_shop/./src/views/shop/ListView.vue?0d78","webpack://vue_shop/./src/views/shop/ListView.vue?f176","webpack://vue_shop/./src/api/shop.js"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[_c('router-link',{attrs:{\"to\":{ name: 'shopCreate' }}},[_c('el-button',{attrs:{\"type\":\"primary\",\"round\":\"\"}},[_vm._v(\"新增\")])],1),_c('el-table',{staticStyle:{\"width\":\"100%\",\"margin-bottom\":\"20px\"},attrs:{\"data\":_vm.categories,\"row-key\":\"id\",\"default-expand-all\":\"\"}},[_c('el-table-column',{attrs:{\"label\":\"名称\",\"width\":\"180\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('span',{staticStyle:{\"margin-left\":\"10px\"}},[_vm._v(_vm._s(scope.row.name))])]}}])}),_c('el-table-column',{attrs:{\"label\":\"图片\",\"width\":\"180\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [(scope.row.parentId !== 0)?_c('img',{attrs:{\"src\":scope.row.image,\"alt\":\"\"}}):_vm._e()]}}])}),_c('el-table-column',{attrs:{\"label\":\"排序\",\"width\":\"180\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-input',{on:{\"change\":function($event){return _vm.handleChange(scope.row.id, scope.row.sort)}},model:{value:(scope.row.sort),callback:function ($$v) {_vm.$set(scope.row, \"sort\", _vm._n($$v))},expression:\"scope.row.sort\"}})]}}])}),_c('el-table-column',{attrs:{\"label\":\"创建时间\",\"width\":\"180\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('span',{staticStyle:{\"margin-left\":\"10px\"}},[_vm._v(\" \"+_vm._s(_vm._f(\"dateFormat\")(scope.row.createdAt)))])]}}])}),_c('el-table-column',{attrs:{\"label\":\"操作\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('router-link',{attrs:{\"to\":{ name: 'shopEdit', params: { id: scope.row.id } }}},[_c('el-button',{attrs:{\"size\":\"mini\"}},[_vm._v(\"编辑\")])],1),_c('el-popconfirm',{attrs:{\"title\":\"确认删除？\"},on:{\"confirm\":function($event){return _vm.handleDelete(scope.row)}}},[_c('el-button',{attrs:{\"slot\":\"reference\",\"size\":\"mini\",\"type\":\"danger\"},slot:\"reference\"},[_vm._v(\"删除\")])],1)]}}])})],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <router-link :to=\"{ name: 'shopCreate' }\">\n      <el-button type=\"primary\" round>新增</el-button>\n    </router-link>\n    <el-table\n      :data=\"categories\"\n      style=\"width: 100%; margin-bottom: 20px\"\n      row-key=\"id\"\n      default-expand-all\n    >\n      <el-table-column label=\"名称\" width=\"180\">\n        <template slot-scope=\"scope\">\n          <span style=\"margin-left: 10px\">{{ scope.row.name }}</span>\n        </template>\n      </el-table-column>\n      <el-table-column label=\"图片\" width=\"180\">\n        <template slot-scope=\"scope\">\n          <img :src=\"scope.row.image\" alt=\"\" v-if=\"scope.row.parentId !== 0\" />\n        </template>\n      </el-table-column>\n      <el-table-column label=\"排序\" width=\"180\">\n        <template slot-scope=\"scope\">\n          <el-input\n            v-model.number=\"scope.row.sort\"\n            @change=\"handleChange(scope.row.id, scope.row.sort)\"\n          ></el-input>\n        </template>\n      </el-table-column>\n      <el-table-column label=\"创建时间\" width=\"180\">\n        <template slot-scope=\"scope\">\n          <span style=\"margin-left: 10px\">\n            {{ scope.row.createdAt | dateFormat }}</span\n          >\n        </template>\n      </el-table-column>\n      <el-table-column label=\"操作\">\n        <template slot-scope=\"scope\">\n          <router-link :to=\"{ name: 'shopEdit', params: { id: scope.row.id } }\">\n            <el-button size=\"mini\">编辑</el-button>\n          </router-link>\n          <el-popconfirm title=\"确认删除？\" @confirm=\"handleDelete(scope.row)\">\n            <el-button size=\"mini\" type=\"danger\" slot=\"reference\"\n              >删除</el-button\n            >\n          </el-popconfirm>\n        </template>\n      </el-table-column>\n    </el-table>\n  </div>\n</template>\n<script>\nimport { ShopList, SortShop, deleteShop } from \"@/api/shop\";\n\nexport default {\n  data() {\n    return {\n      categories: [],\n    };\n  },\n  created() {\n    this.init();\n  },\n  methods: {\n    async init() {\n      const res = await ShopList();\n      this.categories = res.data.categories;\n    },\n    async handleChange(id, sort) {\n      const res = await SortShop(id, { sort });\n      if (res.code !== 20000) {\n        this.$message.error(res.message);\n        return;\n      }\n      this.$message.success(res.message);\n      this.init();\n    },\n    async handleDelete(row) {\n      const res = await deleteShop(row.id);\n      if (res.code !== 20000) {\n        this.$message.error(res.message);\n        return;\n      }\n      this.$message.success(res.message);\n      this.init();\n    },\n  },\n};\n</script>\n<style scoped>\n.el-input {\n  max-width: 50px;\n}\n</style>\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ListView.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ListView.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ListView.vue?vue&type=template&id=20cdfd8f&scoped=true&\"\nimport script from \"./ListView.vue?vue&type=script&lang=js&\"\nexport * from \"./ListView.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ListView.vue?vue&type=style&index=0&id=20cdfd8f&prod&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"20cdfd8f\",\n  null\n  \n)\n\nexport default component.exports","import request from \"@/utils/request\";\n\n// 查询列表\nexport function ShopList(params) {\n  return request({\n    url: \"/admin/categories\",\n    method: \"get\",\n    params,\n  });\n}\n\n// 查询单条\nexport function ShopFetch(id) {\n  return request({\n    url: `/admin/categories/${id}`,\n    method: \"get\",\n  });\n}\n\n// 创建\nexport function createShop(data) {\n  return request({\n    url: \"/admin/categories\",\n    method: \"post\",\n    data,\n  });\n}\n\n// 修改\nexport function updateShop(id, data) {\n  return request({\n    url: `/admin/categories/${id}`,\n    method: \"put\",\n    data,\n  });\n}\n\n// 删除\nexport function deleteShop(id) {\n  return request({\n    url: `/admin/categories/${id}`,\n    method: \"delete\",\n  });\n}\n\n// 排序\nexport function SortShop(id, data) {\n  return request({\n    url: `/admin/categories/${id}/change_sort`,\n    method: \"patch\",\n    data,\n  });\n}\n"],"names":["render","_vm","this","_c","_self","attrs","name","_v","staticStyle","categories","scopedSlots","_u","key","fn","scope","_s","row","parentId","image","_e","on","$event","handleChange","id","sort","model","value","callback","$$v","$set","_n","expression","_f","createdAt","params","handleDelete","slot","staticRenderFns","data","created","methods","component","ShopList","request","url","method","ShopFetch","createShop","updateShop","deleteShop","SortShop"],"sourceRoot":""}