{"version":3,"file":"js/961.7ec4075a.js","mappings":"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","sources":["webpack://vue_shop/./src/views/users/ListView.vue","webpack://vue_shop/src/views/users/ListView.vue","webpack://vue_shop/./src/views/users/ListView.vue?0b05","webpack://vue_shop/./src/views/users/ListView.vue?fa18","webpack://vue_shop/./src/api/user.js"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[_c('router-link',{attrs:{\"to\":{ name: 'usersCreate' }}},[_c('el-button',{attrs:{\"type\":\"primary\",\"round\":\"\"}},[_vm._v(\"新增\")])],1),_c('el-form',{staticClass:\"demo-form-inline\",attrs:{\"inline\":true,\"model\":_vm.searchParams}},[_c('el-form-item',{attrs:{\"label\":\"用户\"}},[_c('el-input',{attrs:{\"placeholder\":\"请输入用户\"},model:{value:(_vm.searchParams.username),callback:function ($$v) {_vm.$set(_vm.searchParams, \"username\", $$v)},expression:\"searchParams.username\"}})],1),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.init}},[_vm._v(\"查询\")])],1)],1),_c('el-table',{staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.users}},[_c('el-table-column',{attrs:{\"label\":\"编号\",\"width\":\"180\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('span',{staticStyle:{\"margin-left\":\"10px\"}},[_vm._v(_vm._s(scope.row.id))])]}}])}),_c('el-table-column',{attrs:{\"label\":\"用户名\",\"width\":\"180\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('span',{staticStyle:{\"margin-left\":\"10px\"}},[_vm._v(_vm._s(scope.row.username))])]}}])}),_c('el-table-column',{attrs:{\"label\":\"头像\",\"width\":\"180\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-image',{staticClass:\"user-avatar\",attrs:{\"src\":scope.row.avatar}})]}}])}),_c('el-table-column',{attrs:{\"label\":\"性别\",\"width\":\"180\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('i',{class:scope.row.sex === 1 ? 'el-icon-male' : 'el-icon-female'})]}}])}),_c('el-table-column',{attrs:{\"label\":\"管理员\",\"width\":\"180\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-switch',{attrs:{\"active-color\":\"#13ce66\",\"inactive-color\":\"#ff4949\"},on:{\"change\":function($event){return _vm.toggleAdmin(scope.row)}},model:{value:(scope.row.admin),callback:function ($$v) {_vm.$set(scope.row, \"admin\", $$v)},expression:\"scope.row.admin\"}})]}}])}),_c('el-table-column',{attrs:{\"label\":\"创建时间\",\"width\":\"180\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('span',{staticStyle:{\"margin-left\":\"10px\"}},[_vm._v(\" \"+_vm._s(_vm._f(\"dateFormat\")(scope.row.createdAt)))])]}}])}),_c('el-table-column',{attrs:{\"label\":\"操作\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('router-link',{attrs:{\"to\":{ name: 'usersEdit', params: { id: scope.row.id } }}},[_c('el-button',{attrs:{\"size\":\"mini\"}},[_vm._v(\"编辑\")])],1),_c('el-popconfirm',{attrs:{\"title\":\"确认删除？\"},on:{\"confirm\":function($event){return _vm.handleDelete(scope.row)}}},[_c('el-button',{attrs:{\"slot\":\"reference\",\"size\":\"mini\",\"type\":\"danger\"},slot:\"reference\"},[_vm._v(\"删除\")])],1)]}}])})],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <router-link :to=\"{ name: 'usersCreate' }\">\n      <el-button type=\"primary\" round>新增</el-button>\n    </router-link>\n    <el-form :inline=\"true\" :model=\"searchParams\" class=\"demo-form-inline\">\n      <el-form-item label=\"用户\">\n        <el-input\n          v-model=\"searchParams.username\"\n          placeholder=\"请输入用户\"\n        ></el-input>\n      </el-form-item>\n      <el-form-item>\n        <el-button type=\"primary\" @click=\"init\">查询</el-button>\n      </el-form-item>\n    </el-form>\n    <el-table :data=\"users\" style=\"width: 100%\">\n      <el-table-column label=\"编号\" width=\"180\">\n        <template slot-scope=\"scope\">\n          <span style=\"margin-left: 10px\">{{ scope.row.id }}</span>\n        </template>\n      </el-table-column>\n      <el-table-column label=\"用户名\" width=\"180\">\n        <template slot-scope=\"scope\">\n          <span style=\"margin-left: 10px\">{{ scope.row.username }}</span>\n        </template>\n      </el-table-column>\n      <el-table-column label=\"头像\" width=\"180\">\n        <template slot-scope=\"scope\">\n          <el-image :src=\"scope.row.avatar\" class=\"user-avatar\" />\n        </template>\n      </el-table-column>\n      <el-table-column label=\"性别\" width=\"180\">\n        <template slot-scope=\"scope\">\n          <i\n            :class=\"scope.row.sex === 1 ? 'el-icon-male' : 'el-icon-female'\"\n          ></i>\n        </template>\n      </el-table-column>\n      <el-table-column label=\"管理员\" width=\"180\">\n        <template slot-scope=\"scope\">\n          <el-switch\n            v-model=\"scope.row.admin\"\n            active-color=\"#13ce66\"\n            inactive-color=\"#ff4949\"\n            @change=\"toggleAdmin(scope.row)\"\n          >\n          </el-switch>\n        </template>\n      </el-table-column>\n      <el-table-column label=\"创建时间\" width=\"180\">\n        <template slot-scope=\"scope\">\n          <span style=\"margin-left: 10px\">\n            {{ scope.row.createdAt | dateFormat }}</span\n          >\n        </template>\n      </el-table-column>\n      <el-table-column label=\"操作\">\n        <template slot-scope=\"scope\">\n          <router-link\n            :to=\"{ name: 'usersEdit', params: { id: scope.row.id } }\"\n          >\n            <el-button size=\"mini\">编辑</el-button>\n          </router-link>\n          <el-popconfirm title=\"确认删除？\" @confirm=\"handleDelete(scope.row)\">\n            <el-button size=\"mini\" type=\"danger\" slot=\"reference\"\n              >删除</el-button\n            >\n          </el-popconfirm>\n        </template>\n      </el-table-column>\n    </el-table>\n  </div>\n</template>\n\n<script>\nimport { fetchUsersList, sortUser, deleteUser } from \"@/api/user\";\nexport default {\n  data() {\n    return {\n      users: [],\n      searchParams: {\n        username: \"\",\n        currentPage: 1,\n        pageSize: 10,\n      },\n    };\n  },\n  created() {\n    this.init();\n  },\n  methods: {\n    async init() {\n      const res = await fetchUsersList(this.searchParams);\n      this.users = res.data.users;\n    },\n    handleEdit(index, row) {\n      console.log(index, row);\n    },\n    async handleDelete(row) {\n      const res = await deleteUser(row.id);\n      if (res.code !== 20000) {\n        this.$message.error(res.message);\n        return;\n      }\n      this.init();\n      this.$message.success(res.message);\n    },\n    onSubmit() {},\n    async toggleAdmin(row) {\n      const res = await sortUser(row.id);\n      if (res.code !== 20000) {\n        this.$message.error(res.message);\n        return;\n      }\n      this.$message.success(res.message);\n    },\n  },\n};\n</script>\n<style scoped>\n.user-avatar {\n  border-radius: 10px;\n}\n</style>\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ListView.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ListView.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ListView.vue?vue&type=template&id=0cf1f40a&scoped=true&\"\nimport script from \"./ListView.vue?vue&type=script&lang=js&\"\nexport * from \"./ListView.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ListView.vue?vue&type=style&index=0&id=0cf1f40a&prod&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0cf1f40a\",\n  null\n  \n)\n\nexport default component.exports","import request from \"@/utils/request\";\n\n// 查询列表\nexport function fetchUsersList(params) {\n  return request({\n    url: \"/admin/users\",\n    method: \"get\",\n    params,\n  });\n}\n\n// 查询单条\nexport function fetchUser(id) {\n  return request({\n    url: `/admin/users/${id}`,\n    method: \"get\",\n  });\n}\n\n// 创建\nexport function createUser(data) {\n  return request({\n    url: \"/admin/users\",\n    method: \"post\",\n    data,\n  });\n}\n\n// 修改\nexport function updateUser(id, data) {\n  return request({\n    url: `/admin/users/${id}`,\n    method: \"put\",\n    data,\n  });\n}\n\n// 删除\nexport function deleteUser(id) {\n  return request({\n    url: `/admin/users/${id}`,\n    method: \"delete\",\n  });\n}\n\n// 修改管理状态\nexport function sortUser(id, data) {\n  return request({\n    url: `http://localhost:3000/admin/users/${id}/toggle_admin`,\n    method: \"patch\",\n    data,\n  });\n}\n"],"names":["render","_vm","this","_c","_self","attrs","name","_v","staticClass","searchParams","model","value","username","callback","$$v","$set","expression","on","init","staticStyle","users","scopedSlots","_u","key","fn","scope","_s","row","id","avatar","class","sex","$event","toggleAdmin","admin","_f","createdAt","params","handleDelete","slot","staticRenderFns","data","currentPage","pageSize","created","methods","handleEdit","console","onSubmit","component","fetchUsersList","request","url","method","fetchUser","createUser","updateUser","deleteUser","sortUser"],"sourceRoot":""}