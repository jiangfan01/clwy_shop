"use strict";(self["webpackChunkvue_shop"]=self["webpackChunkvue_shop"]||[]).push([[563],{5563:function(e,t,s){s.r(t),s.d(t,{default:function(){return _}});var r=function(){var e=this,t=e._self._c;return t("div",[t("el-button",{attrs:{type:"primary",round:""},on:{click:e.handleCreate}},[e._v("新增物流系信息")]),t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.expresses}},[t("el-table-column",{attrs:{prop:"id",label:"编号",width:"180"}}),t("el-table-column",{attrs:{prop:"name",label:"名称",width:"180"}}),t("el-table-column",{attrs:{prop:"code",label:"物流公司编码",width:"180"}}),t("el-table-column",{attrs:{prop:"url",label:"网址",width:"180"}}),t("el-table-column",{attrs:{label:"排序",width:"80"},scopedSlots:e._u([{key:"default",fn:function(s){return[t("el-input",{on:{change:function(t){return e.handleChange(s.row.id,s.row.sort)}},model:{value:s.row.sort,callback:function(t){e.$set(s.row,"sort",e._n(t))},expression:"scope.row.sort"}})]}}])}),t("el-table-column",{attrs:{label:"创建时间",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e._f("dateFormat")(t.row.createdAt))+" ")]}}])}),t("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(s){return[t("el-button",{attrs:{size:"mini"},on:{click:function(t){return e.handleEdit(s.row.id)}}},[e._v(" 编辑 ")]),t("el-popconfirm",{attrs:{title:"确认删除？"},on:{confirm:function(t){return e.handleDelete(s.row)}}},[t("el-button",{attrs:{slot:"reference",size:"mini",type:"danger"},slot:"reference"},[e._v("删除")])],1)]}}])})],1),t("div",{staticClass:"block"},[t("el-pagination",{attrs:{"current-page":e.pagination.currentPage,"page-sizes":[10,20,30,40],"page-size":e.pagination.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.pagination.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),t("CreateDialog",{ref:"form"}),t("EditDialog",{ref:"edit"})],1)},i=[],a=s(4726),l=function(){var e=this,t=e._self._c;return t("div",[t("el-dialog",{attrs:{title:"新增物流信息",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[t("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.express,rules:e.rules,"label-width":"100px"}},[t("el-form-item",{attrs:{label:"物流名称",prop:"name"}},[t("el-input",{model:{value:e.express.name,callback:function(t){e.$set(e.express,"name",t)},expression:"express.name"}})],1),t("el-form-item",{attrs:{label:"物流编码",prop:"code"}},[t("el-input",{model:{value:e.express.code,callback:function(t){e.$set(e.express,"code",t)},expression:"express.code"}})],1),t("el-form-item",{attrs:{label:"网址",prop:"url"}},[t("el-input",{model:{value:e.express.url,callback:function(t){e.$set(e.express,"url",t)},expression:"express.url"}})],1),t("el-form-item",{attrs:{label:"排序",prop:"sort"}},[t("el-input",{model:{value:e.express.sort,callback:function(t){e.$set(e.express,"sort",e._n(t))},expression:"express.sort"}})],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("确 定")])],1)],1)],1)},n=[],o={data(){return{dialogFormVisible:!1,express:{name:"",code:"",url:"",sort:""},formLabelWidth:"120px",rules:{name:[{required:!0,message:"请输入物流名称",trigger:"blur"},{min:3,max:14,message:"长度在 3 到 14个字符",trigger:"blur"}],sort:[{required:!0,message:"请输入排序",trigger:"blur"},{type:"number",message:"排序必须为数字值"}],code:[{required:!0,message:"请输入排序",trigger:"blur"}]}}},methods:{submitForm(e){this.$refs[e].validate((async e=>{if(e){const e=await(0,a.Hx)(this.express);this.dialogFormVisible=!1,this.$message.success(e.message),this.$parent.init()}}))},resetForm(){this.$refs["ruleForm1"].resetFields()}}},u=o,c=s(1001),d=(0,c.Z)(u,l,n,!1,null,null,null),m=d.exports,p=function(){var e=this,t=e._self._c;return t("div",[t("el-dialog",{attrs:{title:"新增物流信息",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[t("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.express,rules:e.rules,"label-width":"100px"}},[t("el-form-item",{attrs:{label:"物流名称",prop:"name"}},[t("el-input",{model:{value:e.express.name,callback:function(t){e.$set(e.express,"name",t)},expression:"express.name"}})],1),t("el-form-item",{attrs:{label:"物流编码",prop:"code"}},[t("el-input",{model:{value:e.express.code,callback:function(t){e.$set(e.express,"code",t)},expression:"express.code"}})],1),t("el-form-item",{attrs:{label:"网址",prop:"url"}},[t("el-input",{model:{value:e.express.url,callback:function(t){e.$set(e.express,"url",t)},expression:"express.url"}})],1),t("el-form-item",{attrs:{label:"排序",prop:"sort"}},[t("el-input",{model:{value:e.express.sort,callback:function(t){e.$set(e.express,"sort",e._n(t))},expression:"express.sort"}})],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("确 定")])],1)],1)],1)},f=[],g={data(){return{dialogFormVisible:!1,express:{name:"",code:"",url:"",sort:""},editId:"",formLabelWidth:"120px",rules:{name:[{required:!0,message:"请输入物流名称",trigger:"blur"},{min:3,max:14,message:"长度在 3 到 14个字符",trigger:"blur"}],sort:[{required:!0,message:"请输入排序",trigger:"blur"},{type:"number",message:"排序必须为数字值"}],code:[{required:!0,message:"请输入排序",trigger:"blur"}]}}},methods:{async initEdit(e){const t=await(0,a.uC)(e);this.editId=e,this.express=t.data.express},submitForm(e){this.$refs[e].validate((async e=>{if(e){const e=await(0,a.Hu)(this.editId,this.express);this.dialogFormVisible=!1,this.$message.success(e.message),this.$parent.init()}}))},resetForm(e){this.$refs[e].resetFields()}}},h=g,b=(0,c.Z)(h,p,f,!1,null,null,null),x=b.exports,v={components:{CreateDialog:m,EditDialog:x},data(){return{expresses:[],searchParams:{currentPage:1,pageSize:10},pagination:{currentPage:1,pageSize:10,total:10}}},created(){this.init()},methods:{async init(){const e=await(0,a.Kd)(this.searchParams);this.expresses=e.data.expresses,this.pagination=e.data.pagination},async handleDelete(e){const t=await(0,a.Jr)(e.id);2e4!==t.code&&this.$message.error(t.message),this.$message.success(t.message),this.init()},async handleChange(e,t){const s=await(0,a.R_)(e,{sort:t});2e4!==s.code&&this.$message.error(s.message),this.$message.success(s.message),this.init()},handleSizeChange(e){this.searchParams.pageSize=e,this.init()},handleCurrentChange(e){this.searchParams.currentPage=e,this.init()},handleCreate(){this.$refs.form.dialogFormVisible=!0,this.$nextTick((()=>{this.$refs.form.resetForm()}))},handleEdit(e){this.$refs.edit.dialogFormVisible=!0,this.isEdit=!0,this.$refs.edit.initEdit(e)}}},$=v,F=(0,c.Z)($,r,i,!1,null,null,null),_=F.exports},4726:function(e,t,s){s.d(t,{Hu:function(){return n},Hx:function(){return l},Jr:function(){return o},Kd:function(){return i},R_:function(){return u},uC:function(){return a}});var r=s(4471);function i(e){return(0,r.Z)({url:"/admin/expresses",method:"get",params:e})}function a(e){return(0,r.Z)({url:`/admin/expresses/${e}`,method:"get"})}function l(e){return(0,r.Z)({url:"/admin/expresses",method:"post",data:e})}function n(e,t){return(0,r.Z)({url:`/admin/expresses/${e}`,method:"put",data:t})}function o(e){return(0,r.Z)({url:`/admin/expresses/${e}`,method:"delete"})}function u(e,t){return(0,r.Z)({url:`/admin/expresses/${e}/change_sort`,method:"patch",data:t})}}}]);
//# sourceMappingURL=563.c9d3bd9f.js.map