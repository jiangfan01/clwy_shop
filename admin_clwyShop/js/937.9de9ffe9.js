"use strict";(self["webpackChunkvue_shop"]=self["webpackChunkvue_shop"]||[]).push([[937],{4937:function(e,t,a){a.r(t),a.d(t,{default:function(){return m}});var n=function(){var e=this,t=e._self._c;return t("div",[t("router-link",{attrs:{to:{name:"create"}}},[t("el-button",{attrs:{type:"primary"}},[e._v("新增")])],1),t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.categories}},[t("el-table-column",{attrs:{prop:"id",label:"编号",width:"180"}}),t("el-table-column",{attrs:{prop:"name",label:"名称",width:"180"}}),t("el-table-column",{attrs:{label:"排序",width:"80"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-input",{on:{change:function(t){return e.handleChange(a.row.id,a.row.sort)}},model:{value:a.row.sort,callback:function(t){e.$set(a.row,"sort",e._n(t))},expression:"scope.row.sort"}})]}}])}),t("el-table-column",{attrs:{label:"创建时间",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e._f("dateFormat")(t.row.createdAt))+" ")]}}])}),t("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("router-link",{attrs:{to:{name:"edit",params:{id:a.row.id}}}},[t("el-button",{attrs:{size:"mini"},on:{click:function(t){return e.handleEdit(a.row)}}},[e._v(" 编辑 ")])],1),t("el-popconfirm",{attrs:{title:"确认删除？"},on:{confirm:function(t){return e.handleDelete(a.row)}}},[t("el-button",{attrs:{slot:"reference",size:"mini",type:"danger"},slot:"reference"},[e._v("删除")])],1)]}}])})],1)],1)},r=[],s=a(4471);function o(e){return(0,s.Z)({url:"/admin/ad_categories",method:"get",params:e})}function i(e){return(0,s.Z)({url:`/admin/ad_categories/${e}`,method:"delete"})}function l(e,t){return(0,s.Z)({url:`/admin/ad_categories/${e}/change_sort`,method:"patch",data:t})}var c={data(){return{categories:[]}},created(){this.init()},methods:{async init(){const e=await o();this.categories=e.data.categories},handleEdit(e){console.log(e)},async handleDelete(e){const t=await i(e.id);2e4===t.code?(this.$message.success(t.message),this.init()):this.$message.error(t.message)},async handleChange(e,t){const a=await l(e,{sort:t});2e4!==a.code&&this.$message.error(a.message),this.$message.success(a.message),this.init()}}},u=c,d=a(1001),h=(0,d.Z)(u,n,r,!1,null,null,null),m=h.exports}}]);
//# sourceMappingURL=937.9de9ffe9.js.map