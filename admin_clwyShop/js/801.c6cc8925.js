"use strict";(self["webpackChunkvue_shop"]=self["webpackChunkvue_shop"]||[]).push([[801],{7801:function(t,e,a){a.r(e),a.d(e,{default:function(){return c}});var n=function(){var t=this,e=t._self._c;return e("div",[e("router-link",{attrs:{to:{name:"adsCreate"}}},[e("el-button",{attrs:{type:"primary",round:""}},[t._v("新增广告")])],1),e("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:t.searchParams}},[e("el-form-item",{attrs:{label:"标题"}},[e("el-input",{attrs:{placeholder:"请输入标题"},model:{value:t.searchParams.title,callback:function(e){t.$set(t.searchParams,"title",e)},expression:"searchParams.title"}})],1),e("el-form-item",{attrs:{label:"所属分类"}},[e("el-select",{attrs:{placeholder:"活动区域"},model:{value:t.searchParams.categoryId,callback:function(e){t.$set(t.searchParams,"categoryId",e)},expression:"searchParams.categoryId"}},t._l(t.categories,(function(t){return e("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1),e("el-form-item",[e("el-button",{attrs:{type:"primary"},on:{click:t.init}},[t._v("查询")])],1),e("el-form-item",[e("el-button",{attrs:{type:"success"}},[t._v("取消")])],1)],1),e("el-table",{staticStyle:{width:"100%"},attrs:{data:t.ads,stripe:""}},[e("el-table-column",{attrs:{label:"编号"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.id))]}}])}),e("el-table-column",{attrs:{label:"缩略图"},scopedSlots:t._u([{key:"default",fn:function(t){return[e("img",{attrs:{src:t.row.image,alt:""}})]}}])}),e("el-table-column",{attrs:{label:"标题"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.title))]}}])}),e("el-table-column",{attrs:{label:"链接地址"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-link",{attrs:{to:"",href:a.row.url}},[t._v(t._s(a.row.url))])]}}])}),e("el-table-column",{attrs:{label:"所属分类"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.category.name))]}}])}),e("el-table-column",{attrs:{label:"排序",width:"80"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-input",{on:{change:function(e){return t.handleChange(a.row.id,a.row.sort)}},model:{value:a.row.sort,callback:function(e){t.$set(a.row,"sort",t._n(e))},expression:"scope.row.sort"}})]}}])}),e("el-table-column",{attrs:{label:"创建时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("dateFormat")(e.row.createdAt)))]}}])}),e("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("router-link",{attrs:{to:{name:"adsEdit",params:{id:a.row.id}}}},[e("el-button",{attrs:{size:"mini"},on:{click:function(e){return t.handleEdit(a.row)}}},[t._v(" 编辑 ")])],1),e("el-popconfirm",{attrs:{title:"确认删除？"},on:{confirm:function(e){return t.handleDelete(a.row)}}},[e("el-button",{attrs:{slot:"reference",size:"mini",type:"danger"},slot:"reference"},[t._v("删除")])],1)]}}])})],1),e("div",{staticClass:"block"},[e("el-pagination",{attrs:{"current-page":t.pagination.currentPage,"page-sizes":[10,20,30,40],"page-size":t.pagination.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.pagination.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1)},r=[],s=a(3147),o={data(){return{ads:[],categories:[],pagination:{currentPage:1,pageSize:10,total:10},searchParams:{title:"",categoryId:"",currentPage:1,pageSize:10}}},created(){this.init()},methods:{async init(){const t=await(0,s.XZ)(this.searchParams);this.ads=t.data.ads,this.pagination=t.data.pagination;const e=await(0,s.$)();this.categories=e.data.categories},handleEdit(t){console.log(t)},async onSubmit(){},async handleDelete(t){const e=await(0,s.Er)(t.id);2e4===e.code?(this.$message.success(e.message),this.init()):this.$message.error(e.message)},async handleChange(t,e){const a=await(0,s.ED)(t,{sort:e});2e4===a.code?(this.$message.success(a.message),this.init()):this.$message.error(a.message)},handleSizeChange(t){this.searchParams.pageSize=t,this.init()},handleCurrentChange(t){this.searchParams.currentPage=t,this.init()}}},l=o,i=a(1001),u=(0,i.Z)(l,n,r,!1,null,null,null),c=u.exports},3147:function(t,e,a){a.d(e,{$:function(){return c},ED:function(){return u},Er:function(){return i},Tt:function(){return s},Ul:function(){return o},XZ:function(){return r},ag:function(){return l}});var n=a(4471);function r(t){return(0,n.Z)({url:"/admin/ads",method:"get",params:t})}function s(t){return(0,n.Z)({url:`/admin/ads/${t}`,method:"get"})}function o(t){return(0,n.Z)({url:"/admin/ads",method:"post",data:t})}function l(t,e){return(0,n.Z)({url:`/admin/ads/${t}`,method:"put",data:e})}function i(t){return(0,n.Z)({url:`/admin/ads/${t}`,method:"delete"})}function u(t,e){return(0,n.Z)({url:`/admin/ads/${t}/change_sort`,method:"patch",data:e})}function c(t){return(0,n.Z)({url:"/admin/ad_categories",method:"get",params:t})}}}]);
//# sourceMappingURL=801.c6cc8925.js.map